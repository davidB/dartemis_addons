// Auto-generated from xfchart.html.
// DO NOT EDIT.

library x_fchart;

import 'dart:html' as autogenerated;
import 'dart:svg' as autogenerated_svg;
import 'package:web_ui/web_ui.dart' as autogenerated;
import 'package:web_ui/observe/observable.dart' as __observe;
import 'dart:html';
import 'package:web_ui/web_ui.dart';



class XFchart extends WebComponent{
  /** Autogenerated from the template. */

  /** CSS class constants. */
  static Map<String, String> _css = {};

  /**
   * Shadow root for this component. We use 'var' to allow simulating shadow DOM
   * on browsers that don't support this feature.
   */
  var _root;
  static final __shadowTemplate = new autogenerated.DocumentFragment.html('''
        <canvas style="width:100%;height:100%"></canvas>
      ''');
  autogenerated.Template __t;

  void created_autogenerated() {
    _root = createShadowRoot();
    __t = new autogenerated.Template(_root);
    _root.nodes.add(__shadowTemplate.clone(true));
    __t.create();
  }

  void inserted_autogenerated() {
    __t.insert();
  }

  void removed_autogenerated() {
    __t.remove();
    __t = null;
  }

  void composeChildren() {
    super.composeChildren();
    if (_root is! autogenerated.ShadowRoot) _root = this;
  }

  /** Original code from the component. */

  Function fct;

  printChart() {
    var c = this.query('canvas') as CanvasElement;
    var g = c.context2d;
    var ymargin = c.height * 0.25;
    var x0 = 0.5;
    var y0 = 0.5 + ymargin;
    var w0 = c.width - 1;
    var h0 = c.height - 1 - 2 * ymargin;


    g.rect(x0, y0, w0, h0);
    g.lineWidth = 1.0;
    g.strokeStyle = 'rgb(100,100,100)';
    g.stroke();
    g.fillStyle = 'rgb(240, 240, 240)';
    //g.fillStyle = 0xFFDFDFDF;
    g.fill();

    g.beginPath();
    g.moveTo(x0, y0 + h0);
    if (fct != null && fct is Function) {
      for(int i = 0; i <= w0; i++) {
        var ratio = i / w0;
        var x = 0.5 + ratio * w0;
        var y = fct(ratio, -h0, y0 + h0);
        g.lineTo(x, y);
      }
    }

    g.lineWidth = 3.0;
    g.strokeStyle = 'rgb(255,100,100)';
    g.stroke();
  }

  void inserted() {
    printChart();
  }
}

//@ sourceMappingURL=xfchart.dart.map