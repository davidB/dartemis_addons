        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>system_verlet Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="favicon.ico">
        
        </head>
        <body data-library="system_verlet">
        <div class="page">
        <div class="header">
          <a href="index.html"><div class="logo"></div></a>
          <a href="index.html">Dart Documentation</a>
         &rsaquo; <a href="system_verlet.html">system_verlet</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
<h2><strong>system_verlet</strong> library</h2>
<div class="doc"><p>TODO lot of test (unit, ...)
TODO benchmark, profiling, optimisation</p></div>
<div>
<h3>Functions</h3>
<div class="method"><h4 id="setCollideOfSegment">
<button class="show-code">Code</button>
dynamic <strong>setCollideOfSegment</strong>(Entity e, collide) <a class="anchor-link" href="#setCollideOfSegment"
              title="Permalink to setCollideOfSegment">#</a></h4>
<div class="doc">
<pre class="source">
setCollideOfSegment(Entity e, collide) {
 (e.getComponent(Constraints.CT) as Constraints).l.forEach((c){
   if (c is Constraint_Distance) c.segment.collide = collide;
 });
}
</pre>
</div>
</div>
<div class="method"><h4 id="pinVector3">
<button class="show-code">Code</button>
dynamic <strong>pinVector3</strong>(Vector3 v, <a href="system_verlet/Constraints.html">Constraints</a> cs) <a class="anchor-link" href="#pinVector3"
              title="Permalink to pinVector3">#</a></h4>
<div class="doc">
<pre class="source">
pinVector3(Vector3 v, Constraints cs) {
 cs.l.add(new Constraint_Pin(v));
}
</pre>
</div>
</div>
<div class="method"><h4 id="pinParticle">
<button class="show-code">Code</button>
dynamic <strong>pinParticle</strong>(Entity e, <a href="http://api.dartlang.org/dart_core/int.html">int</a> index) <a class="anchor-link" href="#pinParticle"
              title="Permalink to pinParticle">#</a></h4>
<div class="doc">
<pre class="source">
pinParticle(Entity e, int index) {
 pinVector3(
   (e.getComponent(Particles.CT) as Particles).position3d[index],
   e.getComponent(Constraints.CT)
 );
}
</pre>
</div>
</div>
<div class="method"><h4 id="makeCloth">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/Iterable.html">Iterable</a>&lt;Component&gt; <strong>makeCloth</strong>(Vector3 origin, Vector3 width, Vector3 height, <a href="http://api.dartlang.org/dart_core/int.html">int</a> segments, <a href="http://api.dartlang.org/dart_core/int.html">int</a> pinMod, <a href="http://api.dartlang.org/dart_core/double.html">double</a> stiffness, <a href="system_particles/ParticlesConstructor.html">ParticlesConstructor</a> genP) <a class="anchor-link" href="#makeCloth"
              title="Permalink to makeCloth">#</a></h4>
<div class="doc">
<pre class="source">
Iterable&lt;Component&gt; makeCloth(Vector3 origin, Vector3 width, Vector3 height, int segments, int pinMod, double stiffness, ParticlesConstructor genP) {
 var xStride = width / segments.toDouble();
 var yStride = height / segments.toDouble();
 var diag = width - height;
 var diagl = diag.length;
 var xStiffness = stiffness * width.length / diagl;
 var yStiffness = stiffness * height.length / diagl;

 var ps = genP(segments * segments);
 var cs = new Constraints();
 for (var y=0; y &lt; segments; ++y) {
   var x0 = ps.position3d[y*segments + 0];
   x0.setFrom(yStride).scale(y.toDouble()).add(origin);
   if (y &gt; 0)
     cs.l.add(new Constraint_Distance.fromParticles(ps, y*segments + 0, (y-1)*segments, yStiffness));
   for (var x = 1; x &lt; segments; ++x) {
//      var px = origin.x + x*xStride - width/2 + xStride/2;
//      var py = origin.y + y*yStride - height/2 + yStride/2;
     var xi = ps.position3d[y*segments + x];
     xi.setFrom(xStride).scale(x.toDouble()).add(x0);
     cs.l.add(new Constraint_Distance.fromParticles(ps, y*segments + x, y*segments+x-1, xStiffness));
     if (y &gt; 0) {
       cs.l.add(new Constraint_Distance.fromParticles(ps, y*segments + x, (y-1)*segments+x, yStiffness));
       //cs.l.add(new Constraint_Distance.fromParticles(ps, y*segments + x, (y-1)*segments+x-1, stiffness));
     }
   }
 }
 ps.copyPosition3dIntoPrevious();

 for (var x=0; x&lt; segments; ++x) {
   if ( x % pinMod == 0)
     pinVector3(ps.position3d[x], cs);
 }

 return [ps, cs];
}
</pre>
</div>
</div>
<div class="method"><h4 id="makeParallelogram">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/Iterable.html">Iterable</a>&lt;Component&gt; <strong>makeParallelogram</strong>(Vector3 origin, Vector3 width, Vector3 height, <a href="http://api.dartlang.org/dart_core/double.html">double</a> stiffness, <a href="system_particles/ParticlesConstructor.html">ParticlesConstructor</a> genP) <a class="anchor-link" href="#makeParallelogram"
              title="Permalink to makeParallelogram">#</a></h4>
<div class="doc">
<pre class="source">
Iterable&lt;Component&gt;  makeParallelogram(Vector3 origin, Vector3 width, Vector3 height, double stiffness, ParticlesConstructor genP) {
 return makeLineSegments([origin, origin + width, origin + width + height, origin + height], stiffness, true, genP);
}
</pre>
</div>
</div>
<div class="method"><h4 id="makeLineSegments">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/Iterable.html">Iterable</a>&lt;Component&gt; <strong>makeLineSegments</strong>(<a href="http://api.dartlang.org/dart_core/List.html">List</a>&lt;Vector3&gt; vertices, <a href="http://api.dartlang.org/dart_core/double.html">double</a> stiffness, <a href="http://api.dartlang.org/dart_core/bool.html">bool</a> closed, <a href="system_particles/ParticlesConstructor.html">ParticlesConstructor</a> genP) <a class="anchor-link" href="#makeLineSegments"
              title="Permalink to makeLineSegments">#</a></h4>
<div class="doc">
<pre class="source">
Iterable&lt;Component&gt; makeLineSegments(List&lt;Vector3&gt; vertices, double stiffness, bool closed, ParticlesConstructor genP) {
 var ps = genP(vertices.length);
 for(int i = 0; i &lt; ps.length; ++i) {
   ps.position3d[i].setFrom(vertices[i]);
 }
 ps.copyPosition3dIntoPrevious();
 var cs = new Constraints();
 for (var i = 1; i &lt; ps.position3d.length; ++i) {
   cs.l.add(new Constraint_Distance.fromParticles(ps, i, i-1, stiffness));
 }
 if (closed) {
   cs.l.add(new Constraint_Distance.fromParticles(ps, 0, ps.position3d.length - 1, stiffness));
 }
 return [ps, cs];
}
</pre>
</div>
</div>
<div class="method"><h4 id="makeTireXY">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/Iterable.html">Iterable</a>&lt;Component&gt; <strong>makeTireXY</strong>(Vector3 origin, <a href="http://api.dartlang.org/dart_core/double.html">double</a> radius, <a href="http://api.dartlang.org/dart_core/int.html">int</a> segments, <a href="http://api.dartlang.org/dart_core/double.html">double</a> spokeStiffness, <a href="http://api.dartlang.org/dart_core/double.html">double</a> treadStiffness, <a href="system_particles/ParticlesConstructor.html">ParticlesConstructor</a> genP) <a class="anchor-link" href="#makeTireXY"
              title="Permalink to makeTireXY">#</a></h4>
<div class="doc">
<pre class="source">
Iterable&lt;Component&gt; makeTireXY(Vector3 origin, double radius, int segments, double spokeStiffness, double treadStiffness, ParticlesConstructor genP) {
 var stride = (2 * math.PI) / segments;

 // particles
 var ps = genP(segments + 1);
 for (var i=0; i &lt; segments; ++i) {
   var theta = i * stride;
   var v = ps.position3d[i].setFrom(origin);
   v.x = v.x + math.cos(theta) * radius;
   v.y = v.y + math.sin(theta) * radius;
 }
 ps.position3d[segments].setFrom(origin);
 ps.copyPosition3dIntoPrevious();
 // constraints
 var cs = new Constraints();
 for (var i=0; i &lt; segments; ++i) {
   cs.l.add(new Constraint_Distance.fromParticles(ps, i, (i + 1) % segments, treadStiffness));
   cs.l.add(new Constraint_Distance.fromParticles(ps, i, segments, spokeStiffness));
   cs.l.add(new Constraint_Distance.fromParticles(ps, i, (i + 5) % segments, treadStiffness));
 }
 return [ps,cs];
}
</pre>
</div>
</div>
</div>
<div>
<h3>Abstract Classes</h3>
          <div class="type">
          <h4>
            <a href="system_verlet/Constraint.html"><strong>Constraint</strong></a>
          </h4>
          </div>
          
</div>
<div>
<h3>Classes</h3>
          <div class="type">
          <h4>
            <a href="system_verlet/Body.html"><strong>Body</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="system_verlet/Constraint_AngleXY.html"><strong>Constraint_AngleXY</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="system_verlet/Constraint_Distance.html"><strong>Constraint_Distance</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="system_verlet/Constraint_Pin.html"><strong>Constraint_Pin</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="system_verlet/Constraints.html"><strong>Constraints</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="system_verlet/System_Simulator.html"><strong>System_Simulator</strong></a>
          </h4>
          </div>
          
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-07-26 14:44:11.524</div>
        </div>
        <script async src="client-live-nav.js"></script>
        </body></html>
        
